<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Quizshow â€“ Login</title>

  <!-- FIREBASE (Compat) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>

  <script>
    // âœ… Firebase Config (databaseURL MUSS deine echte Realtime-DB URL sein)
    const firebaseConfig = {
      apiKey: "AIzaSyCob25y3pT7O6wjf21l9xiaCXhGMFLzFQg",
      authDomain: "https://testprojekt-dada3-default-rtdb.europe-west1.firebasedatabase.app",
      databaseURL: "HIER_DEINE_ECHTE_DATABASE_URL_EINTRAGEN",
      projectId: "testprojekt-dada3",
      storageBucket: "testprojekt-dada3.firebasestorage.app",
      messagingSenderId: "651866459764",
      appId: "1:651866459764:web:ed23cf3fd5ccf02a42cb21"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
  </script>

  <style>
    body{margin:0;font-family:Arial;background:#0b1020;color:#e9eefc}
    .hidden{display:none}

    .loginScreen{
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:center;
      height:100vh;
      gap:15px;
      padding:20px;
      box-sizing:border-box;
      text-align:center;
    }

    .loginScreen input{
      padding:12px;
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.2);
      background:rgba(255,255,255,0.08);
      color:#e9eefc;
      font-size:16px;
      width:min(360px, 90vw);
      outline:none;
    }

    .loginScreen button{
      padding:12px 20px;
      border:none;
      border-radius:10px;
      background:#2563eb;
      color:white;
      font-size:16px;
      cursor:pointer;
      width:min(360px, 90vw);
    }
    .loginScreen button:hover{filter:brightness(1.08)}

    .buzzerBar{
      margin-top:20px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;
    }

    .buzzerBtn{
      background:#dc2626;
      color:white;
      font-size:18px;
      padding:12px 18px;
      border:none;
      border-radius:12px;
      cursor:pointer;
    }
    .buzzerBtn:active{transform:scale(0.98)}

    .resetBtn{
      background:rgba(255,255,255,0.10);
      color:#e9eefc;
      border:1px solid rgba(255,255,255,0.18);
      padding:12px 14px;
      border-radius:12px;
      cursor:pointer;
    }

    #winner{
      font-weight:800;
      font-size:16px;
      opacity:0.95;
    }

    .hint{
      opacity:0.75;
      font-size:13px;
      margin-top:6px;
      max-width:520px;
      line-height:1.4;
    }
  </style>
</head>

<body>

  <div class="loginScreen">
    <h1>Quizshow</h1>

    <input id="loginName" placeholder="Dein Name" autocomplete="off" />
    <button onclick="enterGame()">EinwÃ¤hlen</button>

    <div class="hint">
      Nach dem EinwÃ¤hlen wirst du automatisch auf die Spielseite <b>spiel.html</b> weitergeleitet.
    </div>

    <hr style="width:min(520px, 90vw); border:none; border-top:1px solid rgba(255,255,255,0.12); margin:22px 0;">

    <div class="buzzerBar">
      <button class="buzzerBtn" onclick="buzz()">ðŸ”´ BUZZER</button>
      <button class="resetBtn" onclick="resetBuzz()">Reset</button>
      <span id="winner"></span>
    </div>

    <div class="hint">
      Buzzer geht auch schon hier (z.B. zum Testen). Im Spiel kannst du ihn spÃ¤ter auch nochmal einbauen.
    </div>
  </div>

  <script>
    // Enter auch zum EinwÃ¤hlen
    document.getElementById("loginName").addEventListener("keydown", (e) => {
      if (e.key === "Enter") enterGame();
    });

    function enterGame(){
      const name = document.getElementById("loginName").value.trim();
      if(!name){
        alert("Bitte Name eingeben");
        return;
      }

      // Name speichern (damit spiel.html ihn kennt)
      localStorage.setItem("quiz_name", name);

      // âœ… Weiterleitung (gleiches Verzeichnis)
      window.location.href = "spiel.html";
    }

    async function buzz(){
      const myName = localStorage.getItem("quiz_name") || document.getElementById("loginName").value.trim();
      if(!myName){
        alert("Gib erst deinen Namen ein ðŸ™‚");
        return;
      }

      const buzzerRef = db.ref("buzzer");
      const snap = await buzzerRef.get();

      // Nur der erste gewinnt
      if(!snap.exists() || !snap.val()){
        buzzerRef.set(myName);
      }
    }

    function resetBuzz(){
      db.ref("buzzer").set("");
    }

    db.ref("buzzer").on("value", (snap)=>{
      const val = snap.val();
      const el = document.getElementById("winner");
      el.textContent = val ? ("Gewinner: " + val) : "";
    });
  </script>

  <!--
    HINWEIS (GitHub Pages):
    - Wenn index.html und spiel.html im selben Ordner liegen â†’ passt "spiel.html".
    - Wenn spiel.html in einem Unterordner liegt, z.B. /game/spiel.html â†’ dann musst du unten Ã¤ndern:
      window.location.href = "game/spiel.html";
  -->
</body>
</html>
