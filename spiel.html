<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quizshow – Runden</title>

<style>
body{margin:0;font-family:Arial;background:#0b1020;color:#e9eefc;padding:20px}

button{
  padding:8px 14px;
  margin:5px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  background:#2563eb;
  color:white;
}

.timeline{
  display:grid;
  gap:8px;
  margin-top:20px;
  margin-bottom:30px;
}

.slot{
  min-height:130px;
  border:2px dashed rgba(255,255,255,0.3);
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
}

.pool{
  display:grid;
  grid-template-columns: repeat(5,1fr);
  gap:12px;
}

.cardItem{
  background: rgba(0,0,0,0.4);
  border-radius:12px;
  padding:8px;
  text-align:center;
  cursor:pointer;
  transition:0.2s;
}

.cardItem img{
  width:70px;
  height:70px;
  object-fit:cover;
  border-radius:8px;
  display:block;
  margin:auto;
  margin-bottom:6px;
}

.cardItem:hover{
  transform:scale(1.05);
}

.selected{ outline:3px solid yellow; }
.fixed{ outline:3px solid lime; }
</style>
</head>

<body>

<h2 id="roundTitle">Runde</h2>

<button onclick="setRandomStarter()">Zufällig</button>
<button onclick="nextRound()">Nächste Runde</button>

<div id="timeline" class="timeline"></div>

<h3>Pool</h3>
<div id="pool" class="pool"></div>

<script>

/* ============================
   RUNDEN
============================ */

const rounds = [
{
  title:"Runde 1 – Fußball Marktwerte",
  slotCount:15,
  data:[
    { name:"Lamine Yamal", value:258.4, img:"assets/lamine_yamal.jpg" },
    { name:"Kylian Mbappé", value:192.1, img:"assets/kylian_mbappe.jpg" },
    { name:"Vinicius Junior", value:182.7, img:"assets/vinicius_junior.jpg" },
    { name:"Erling Haaland", value:177.9, img:"assets/erling_haaland.jpg" },
    { name:"Jude Bellingham", value:177.1, img:"assets/jude_bellingham.jpg" },
    { name:"Michael Olise", value:156.7, img:"assets/michael_olise.jpg" },
    { name:"Pedri", value:142.3, img:"assets/pedri.jpg" },
    { name:"Cole Palmer", value:138.7, img:"assets/cole_palmer.jpg" },
    { name:"Jamal Musiala", value:130.7, img:"assets/jamal_musiala.jpg" },
    { name:"João Neves", value:129.7, img:"assets/joao_neves.jpg" },
    { name:"Florian Wirtz", value:126.5, img:"assets/florian_wirtz.jpg" },
    { name:"Bukayo Saka", value:123.0, img:"assets/bukayo_saka.jpg" },
    { name:"Pau Cubarsí", value:122.9, img:"assets/pau_cubarsi.jpg" },
    { name:"Declan Rice", value:121.1, img:"assets/declan_rice.jpg" },
    { name:"Viktor Gyökeres", value:120.1, img:"assets/viktor_gyokeres.jpg" }
  ]
},
{
  title:"Runde 2 – Platzhalter",
  slotCount:10,
  data:[
    { name:"Platzhalter 1", value:10, img:"assets/lamine_yamal.jpg" },
    { name:"Platzhalter 2", value:20, img:"assets/lamine_yamal.jpg" }
  ]
}
];

let currentRound = 0;
let players = [];
let selectedCard = null;
let slots = [];

const pool = document.getElementById("pool");
const timeline = document.getElementById("timeline");

/* ============================
   INIT
============================ */

startRound();

/* ============================
   RUNDE STARTEN
============================ */

function startRound(){

  const round = rounds[currentRound];
  document.getElementById("roundTitle").textContent = round.title;

  players = shuffle([...round.data]);

  pool.innerHTML = "";
  timeline.innerHTML = "";
  slots = [];

  timeline.style.gridTemplateColumns = `repeat(${round.slotCount},1fr)`;

  // Slots erstellen
  for(let i=0;i<round.slotCount;i++){
    const slot = document.createElement("div");
    slot.className = "slot";
    slot.dataset.index = i;

    slot.onclick = () => {
      if(!selectedCard) return;
      placeWithShift(i, selectedCard);
      selectedCard.classList.remove("selected");
      selectedCard = null;
    };

    timeline.appendChild(slot);
    slots.push(slot);
  }

  // Karten erstellen
  players.forEach(p=>{
    const div = document.createElement("div");
    div.className="cardItem";
    div.dataset.value=p.value;

    div.innerHTML=`
      <img src="${p.img}">
      <div>${p.name}</div>
    `;

    div.onclick=()=>{
      if(div.classList.contains("fixed")) return;
      if(selectedCard) selectedCard.classList.remove("selected");
      selectedCard=div;
      div.classList.add("selected");
    };

    pool.appendChild(div);
  });

  setRandomStarter();
}

/* ============================
   ZUFÄLLIGER STARTSPIELER
============================ */

function setRandomStarter(){

  // alles resetten
  document.querySelectorAll(".cardItem").forEach(c=>{
    c.classList.remove("fixed");
    pool.appendChild(c);
  });

  const cards = document.querySelectorAll(".cardItem");
  const randomCard = cards[Math.floor(Math.random()*cards.length)];

  const middle = Math.floor(slots.length/2);
  slots[middle].appendChild(randomCard);

  randomCard.classList.add("fixed");
}

/* ============================
   SHIFT-INSERT
============================ */

function placeWithShift(index, card){

  removeIfExists(card);

  if(slots[index].children.length===0){
    slots[index].appendChild(card);
    return;
  }

  let emptyRight=-1;
  for(let i=index;i<slots.length;i++){
    if(slots[i].children.length===0){
      emptyRight=i;
      break;
    }
  }

  if(emptyRight!==-1){
    for(let i=emptyRight;i>index;i--){
      if(slots[i-1].children.length>0){
        slots[i].appendChild(slots[i-1].children[0]);
      }
    }
    slots[index].appendChild(card);
  }
}

function removeIfExists(card){
  slots.forEach(s=>{
    if(s.children.length>0 && s.children[0]===card){
      s.innerHTML="";
    }
  });
}

/* ============================
   NÄCHSTE RUNDE
============================ */

function nextRound(){
  currentRound++;
  if(currentRound>=rounds.length) currentRound=0;
  startRound();
}

/* ============================
   SHUFFLE
============================ */

function shuffle(arr){
  return arr.sort(()=>Math.random()-0.5);
}

</script>

</body>
</html>
