<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quizshow ‚Äì Zeitstrahl</title>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCob25y3pT7O6wjf21l9xiaCXhGMFLzFQg",
  authDomain: "testprojekt-dada3.firebaseapp.com",
  databaseURL: "https://testprojekt-dada3-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "testprojekt-dada3",
  storageBucket: "testprojekt-dada3.firebasestorage.app",
  messagingSenderId: "651866459764",
  appId: "1:651866459764:web:ed23cf3fd5ccf02a42cb21"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
</script>

<style>
body{margin:0;font-family:Arial;background:#0b1020;color:#e9eefc}

/* BUZZER */
.buzzerBar{
  background:#111a33;
  padding:12px;
  display:flex;
  gap:15px;
  align-items:center;
  justify-content:center;
  border-bottom:2px solid #2a3a66;
  flex-wrap:wrap;
}

.buzzerBtn{
  background:red;
  color:white;
  font-size:20px;
  padding:10px 20px;
  border:none;
  border-radius:10px;
  cursor:pointer;
}

.resetBtn{
  background:#333;
  color:white;
  border:none;
  padding:10px 15px;
  border-radius:10px;
  cursor:pointer;
}

.winner{
  font-weight:bold;
  font-size:18px;
}

/* SPIEL */
.app{
  padding:20px;
}

.timeline{
  display:grid;
  grid-template-columns: repeat(15, 1fr);
  gap:8px;
  margin-bottom:30px;
}

.slot{
  min-height:140px;
  border:2px dashed rgba(255,255,255,0.3);
  border-radius:12px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:12px;
  text-align:center;
  padding:4px;
}

.pool{
  display:grid;
  grid-template-columns: repeat(5, 1fr);
  gap:12px;
}

.cardItem{
  background: rgba(0,0,0,0.4);
  border-radius:12px;
  padding:8px;
  text-align:center;
  cursor:pointer;
  transition:0.2s;
}

.cardItem img{
  width:70px;
  height:70px;
  object-fit:cover;
  border-radius:8px;
  display:block;
  margin:auto;
  margin-bottom:6px;
}

.cardItem:hover{
  transform:scale(1.05);
}

.selected{
  outline:3px solid yellow;
}
</style>
</head>

<body>

<!-- BUZZER -->
<div class="buzzerBar">
  <button class="buzzerBtn" onclick="buzz()">üî¥ BUZZER</button>
  <button class="resetBtn" onclick="resetBuzz()">Reset</button>
  <span id="winner" class="winner"></span>
</div>

<div class="app">

<h2>Top 15 Fu√üballer ‚Äì Marktwert Zeitstrahl</h2>
<p>Links = niedriger Marktwert ‚Üí Rechts = h√∂her</p>

<div id="timeline" class="timeline"></div>

<h3>Spieler</h3>
<div id="pool" class="pool"></div>

</div>

<script>

/* ========= NAME CHECK ========= */
const myName = localStorage.getItem("quiz_name");
if(!myName){
  alert("Kein Name gefunden.");
  window.location.href = "index.html";
}

/* ========= BUZZER ========= */
async function buzz(){
  const buzzerRef = db.ref("buzzer");
  const snap = await buzzerRef.get();
  if(!snap.exists() || !snap.val()){
    buzzerRef.set(myName);
  }
}

function resetBuzz(){
  db.ref("buzzer").set("");
}

db.ref("buzzer").on("value", (snap)=>{
  const val = snap.val();
  document.getElementById("winner").textContent =
    val ? ("Gewinner: " + val) : "";
});

/* ========= SPIELDATEN ========= */

const players = [
{ name:"Lamine Yamal", img:"assets/lamine_yamal.jpg" },
{ name:"Kylian Mbapp√©", img:"assets/kylian_mbappe.jpg" },
{ name:"Vinicius Junior", img:"assets/vinicius_junior.jpg" },
{ name:"Erling Haaland", img:"assets/erling_haaland.jpg" },
{ name:"Jude Bellingham", img:"assets/jude_bellingham.jpg" },
{ name:"Michael Olise", img:"assets/michael_olise.jpg" },
{ name:"Pedri", img:"assets/pedri.jpg" },
{ name:"Cole Palmer", img:"assets/cole_palmer.jpg" },
{ name:"Jamal Musiala", img:"assets/jamal_musiala.jpg" },
{ name:"Jo√£o Neves", img:"assets/joao_neves.jpg" },
{ name:"Florian Wirtz", img:"assets/florian_wirtz.jpg" },
{ name:"Bukayo Saka", img:"assets/bukayo_saka.jpg" },
{ name:"Pau Cubars√≠", img:"assets/pau_cubarsi.jpg" },
{ name:"Declan Rice", img:"assets/declan_rice.jpg" },
{ name:"Viktor Gy√∂keres", img:"assets/viktor_gyokeres.jpg" }
];

let selectedCard = null;
const pool = document.getElementById("pool");
const timeline = document.getElementById("timeline");

/* ========= ZEITSTRAHL ========= */

for(let i=0;i<15;i++){
  const slot = document.createElement("div");
  slot.className = "slot";
  slot.innerHTML = "Slot " + (i+1);

  slot.onclick = () => {
    if(!selectedCard) return;
    if(slot.children.length > 1) return;

    slot.innerHTML = "";
    slot.appendChild(selectedCard);
    selectedCard.classList.remove("selected");
    selectedCard = null;
  };

  timeline.appendChild(slot);
}

/* ========= KARTEN ========= */

players.forEach(p => {

  const div = document.createElement("div");
  div.className = "cardItem";

  div.innerHTML = `
    <img src="${p.img}" alt="${p.name}">
    <div>${p.name}</div>
  `;

  div.onclick = () => {
    if(selectedCard){
      selectedCard.classList.remove("selected");
    }
    selectedCard = div;
    div.classList.add("selected");
  };

  pool.appendChild(div);
});

</script>

</body>
</html>
